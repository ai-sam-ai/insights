<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SAM AI Database Schema - Entity Relationship Diagram</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            background: #f5f5f5;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            padding: 40px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            border-radius: 8px;
        }

        h1 {
            color: #2c3e50;
            font-size: 2.5em;
            margin-bottom: 10px;
            border-bottom: 4px solid #3498db;
            padding-bottom: 15px;
        }

        .metadata {
            background: #ecf0f1;
            padding: 15px;
            border-radius: 5px;
            margin: 20px 0;
            font-size: 0.95em;
        }

        .metadata p {
            margin: 5px 0;
        }

        .metadata strong {
            color: #2c3e50;
        }

        .status-badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 0.85em;
            font-weight: 600;
            margin-left: 10px;
        }

        .status-active {
            background: #d4edda;
            color: #155724;
        }

        .nav-tabs {
            display: flex;
            gap: 10px;
            margin: 30px 0 20px 0;
            border-bottom: 2px solid #ecf0f1;
        }

        .nav-tab {
            padding: 12px 24px;
            background: #ecf0f1;
            border: none;
            border-radius: 5px 5px 0 0;
            cursor: pointer;
            font-size: 1em;
            font-weight: 600;
            color: #7f8c8d;
            transition: all 0.3s;
        }

        .nav-tab:hover {
            background: #d5dbdb;
        }

        .nav-tab.active {
            background: #3498db;
            color: white;
        }

        .tab-content {
            display: none;
            padding: 30px 0;
        }

        .tab-content.active {
            display: block;
        }

        .diagram-container {
            background: #fafafa;
            padding: 30px;
            border-radius: 8px;
            margin: 20px 0;
            overflow-x: auto;
        }

        .model-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .model-card {
            background: white;
            border: 2px solid #ecf0f1;
            border-radius: 8px;
            padding: 20px;
            transition: all 0.3s;
        }

        .model-card:hover {
            border-color: #3498db;
            box-shadow: 0 4px 12px rgba(52, 152, 219, 0.2);
        }

        .model-header {
            font-size: 1.2em;
            font-weight: 700;
            color: #2c3e50;
            margin-bottom: 10px;
            padding-bottom: 10px;
            border-bottom: 2px solid #3498db;
        }

        .model-tech-name {
            font-family: 'Courier New', monospace;
            font-size: 0.85em;
            color: #7f8c8d;
            margin-bottom: 15px;
        }

        .model-section {
            margin: 15px 0;
        }

        .model-section-title {
            font-size: 0.9em;
            font-weight: 600;
            color: #7f8c8d;
            text-transform: uppercase;
            margin-bottom: 8px;
        }

        .relationship-item {
            font-size: 0.9em;
            padding: 6px 10px;
            background: #e8f4f8;
            border-left: 3px solid #3498db;
            margin: 5px 0;
            border-radius: 3px;
        }

        .relationship-type {
            font-weight: 600;
            color: #3498db;
        }

        .used-by {
            font-size: 0.85em;
            color: #7f8c8d;
            padding: 8px 10px;
            background: #f8f9fa;
            border-radius: 3px;
            margin-top: 10px;
        }

        .search-box {
            width: 100%;
            padding: 12px 20px;
            font-size: 1em;
            border: 2px solid #ecf0f1;
            border-radius: 5px;
            margin: 20px 0;
            transition: border-color 0.3s;
        }

        .search-box:focus {
            outline: none;
            border-color: #3498db;
        }

        .legend {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }

        .legend-title {
            font-size: 1.1em;
            font-weight: 700;
            color: #2c3e50;
            margin-bottom: 15px;
        }

        .legend-items {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .legend-color {
            width: 20px;
            height: 20px;
            border-radius: 3px;
        }

        .color-conversation { background: #3498db; }
        .color-canvas { background: #9b59b6; }
        .color-memory { background: #e74c3c; }
        .color-agent { background: #2ecc71; }
        .color-workflow { background: #f39c12; }
        .color-sam { background: #1abc9c; }

        footer {
            margin-top: 60px;
            padding-top: 20px;
            border-top: 2px solid #ecf0f1;
            text-align: center;
            color: #7f8c8d;
            font-size: 0.9em;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>SAM AI Database Schema
            <span class="status-badge status-active">MAINTAINED FILE</span>
        </h1>

        <div class="metadata">
            <p><strong>Last Updated:</strong> 2025-10-13 (Auto-generated from ai_brain models)</p>
            <p><strong>Total Models:</strong> 55+ models across ai_brain module</p>
            <p><strong>Purpose:</strong> Visual reference for database schema, model relationships, and architectural boundaries</p>
            <p><strong>Maintained By:</strong> /docs agent (daily scans) or /schema agent (on-demand)</p>
            <p><strong>‚ö†Ô∏è IMPORTANT:</strong> This file is MAINTAINED (not versioned). Updates replace existing content.</p>
        </div>

        <!-- Navigation Tabs -->
        <div class="nav-tabs">
            <button class="nav-tab active" onclick="showTab('diagram')">ERD Diagram</button>
            <button class="nav-tab" onclick="showTab('models')">Model Browser</button>
            <button class="nav-tab" onclick="showTab('capabilities')">Capability Matrix</button>
        </div>

        <!-- Tab 1: ERD Diagram -->
        <div id="diagram-tab" class="tab-content active">
            <h2>Entity Relationship Diagram</h2>

            <div class="legend">
                <div class="legend-title">Model Categories</div>
                <div class="legend-items">
                    <div class="legend-item">
                        <div class="legend-color color-conversation"></div>
                        <span>Conversation System</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color color-canvas"></div>
                        <span>Canvas/Workflow System</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color color-memory"></div>
                        <span>Memory/Graph System</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color color-agent"></div>
                        <span>Agent System</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color color-workflow"></div>
                        <span>N8N/Workflow Types</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color color-sam"></div>
                        <span>SAM Personality/Settings</span>
                    </div>
                </div>
            </div>

            <h3 style="margin-top: 30px; color: #3498db;">üìò Section 1: Conversation & AI Services System</h3>
            <p style="color: #7f8c8d; margin-bottom: 20px;">Core models for AI conversations, messages, token tracking, and AI service configuration</p>

            <div class="diagram-container">
                <div class="mermaid">
erDiagram
    %% ========================================================================
    %% CONVERSATION SYSTEM (Blue)
    %% ========================================================================
    AI_CONVERSATION ||--o{ AI_MESSAGE : "has messages"
    AI_CONVERSATION ||--o{ AI_TOKEN_USAGE : "tracks tokens"
    AI_CONVERSATION }o--|| RES_USERS : "belongs to user"
    AI_CONVERSATION }o--o{ AI_WORKSPACE : "shared in workspaces"
    AI_CONVERSATION {
        int id PK
        string name
        int user_id FK
        string context_model
        int context_id
        string conversation_type
        string imported_from
        string original_uuid
        datetime last_message_date
    }
    AI_MESSAGE {
        int id PK
        int conversation_id FK
        string role
        text content
        int token_count
        string ai_model
        string ai_provider
        int response_time_ms
    }
    AI_TOKEN_USAGE {
        int id PK
        int conversation_id FK
        int input_tokens
        int output_tokens
        int total_tokens
        float cost_usd
    }
    RES_USERS {
        int id PK
        string name
        string email
    }
    AI_WORKSPACE {
        int id PK
        string name
        text description
    }

    %% ========================================================================
    %% AI SERVICES
    %% ========================================================================
    AI_SERVICE ||--o{ AI_SERVICE_CONFIG : "has config"
    AI_SERVICE }o--|| AI_SERVICE_PROVIDER : "uses provider"
    AI_SERVICE {
        int id PK
        string name
        int provider_id FK
        string model_name
        boolean active
    }
    AI_SERVICE_CONFIG {
        int id PK
        int service_id FK
        string config_key
        string config_value
    }
    AI_SERVICE_PROVIDER {
        int id PK
        string name
        string api_endpoint
        string provider_type
    }
                </div>
            </div>

            <h3 style="margin-top: 50px; color: #9b59b6;">üé® Section 2: Canvas/Workflow System</h3>
            <p style="color: #7f8c8d; margin-bottom: 20px;">Visual workflow canvas, nodes, connections, executions, and N8N integration</p>

            <div class="diagram-container">
                <div class="mermaid">
erDiagram
    %% ========================================================================
    %% CANVAS/WORKFLOW SYSTEM (Purple)
    %% ========================================================================
    CANVAS ||--o{ NODES : "contains nodes"
    CANVAS ||--o{ EXECUTIONS : "has executions"
    CANVAS ||--o{ CONNECTIONS : "defines connections"
    CANVAS }o--|| WORKFLOW_TYPES : "has type"
    CANVAS }o--|| WORKFLOW_BUSINESS_UNIT : "belongs to unit"
    CANVAS }o--|| WORKFLOW_TEMPLATE : "created from template"
    CANVAS }o--|| AI_BRANCH : "implements branch"
    CANVAS {
        int id PK
        string name
        string branch_type
        int branch_id FK
        string canvas_type
        text json_definition
        string execution_mode
        string cron_expression
        string webhook_url
    }
    NODES ||--o{ CONNECTIONS : "source node"
    NODES ||--o{ CONNECTIONS : "target node"
    NODES }o--|| NODE_TYPES : "has type"
    NODES }o--|| API_CREDENTIALS : "uses credentials"
    NODES {
        int id PK
        int canvas_id FK
        string node_id
        string name
        int node_type_id FK
        text parameters
        float x_cord
        float y_cord
        boolean disabled
        text input_connections
        text output_connections
    }
    EXECUTIONS {
        int id PK
        int canvas_id FK
        string state
        datetime start_time
        datetime end_time
        string trigger_type
        int triggered_by FK
        text input_data
        text output_data
        text error_message
    }
    CONNECTIONS {
        int id PK
        int canvas_id FK
        int from_node_id FK
        int to_node_id FK
        string connection_type
    }
    WORKFLOW_TYPES {
        int id PK
        string workflow_type
        string name
        text description
    }
    WORKFLOW_TEMPLATE {
        int id PK
        string name
        int workflow_type_id FK
        text json_definition
        int author_id FK
    }
    NODE_TYPES {
        int id PK
        string node_type
        string name
        string category
        text icon_data
        text default_parameters
    }
    API_CREDENTIALS {
        int id PK
        string name
        string credential_type
        text encrypted_data
    }
    WORKFLOW_BUSINESS_UNIT {
        int id PK
        string name
    }
    AI_BRANCH {
        int id PK
        string technical_name
        string display_name
    }
                </div>
            </div>

            <h3 style="margin-top: 50px; color: #e74c3c;">üß† Section 3: Memory, Agents & SAM Personality</h3>
            <p style="color: #7f8c8d; margin-bottom: 20px;">Graph memory services, agent registry/execution, and SAM personality adaptation</p>

            <div class="diagram-container">
                <div class="mermaid">
erDiagram
    %% ========================================================================
    %% MEMORY/GRAPH SYSTEM (Red)
    %% ========================================================================
    AI_CONVERSATION {
        int id PK
        string name
        int user_id FK
    }
    AI_GRAPH_SERVICE ||--o{ AI_CONVERSATION : "indexes conversations"
    AI_VECTOR_SERVICE ||--o{ AI_CONVERSATION : "embeds conversations"
    AI_CONVERSATION_IMPORT ||--o{ AI_CONVERSATION : "imports to"
    AI_GRAPH_SERVICE {
        int id PK
        string service_type
        string connection_string
        boolean active
    }
    AI_VECTOR_SERVICE {
        int id PK
        string service_type
        string connection_string
        boolean active
    }
    AI_CONVERSATION_IMPORT {
        int id PK
        string import_source
        int conversations_imported
        datetime import_date
    }

    %% ========================================================================
    %% AGENT SYSTEM (Green)
    %% ========================================================================
    AI_AGENT_DEFINITION ||--o{ AI_AGENT_EXECUTION : "executes"
    AI_AGENT_DEFINITION ||--o{ AI_AGENT_KNOWLEDGE : "has knowledge"
    AI_AGENT_DEFINITION {
        int id PK
        string name
        string agent_type
        text system_prompt
        text capabilities
        boolean active
    }
    AI_AGENT_EXECUTION {
        int id PK
        int agent_id FK
        datetime start_time
        datetime end_time
        string status
        text input_data
        text output_data
    }
    AI_AGENT_KNOWLEDGE {
        int id PK
        int agent_id FK
        string knowledge_type
        text knowledge_content
    }

    %% ========================================================================
    %% SAM PERSONALITY SYSTEM (Teal)
    %% ========================================================================
    SAM_PERSONALITY ||--o{ SAM_USER_PROFILE : "adapts to users"
    SAM_PERSONALITY ||--o{ SAM_MODE_CONTEXT : "has modes"
    SAM_PERSONALITY {
        int id PK
        string name
        text personality_traits
        text communication_style
    }
    SAM_USER_PROFILE {
        int id PK
        int user_id FK
        int personality_id FK
        text preferences
        text conversation_history
    }
    SAM_MODE_CONTEXT {
        int id PK
        string mode_name
        text mode_prompt
        text capabilities
    }
    RES_USERS {
        int id PK
        string name
        string email
    }
    SAM_USER_PROFILE }o--|| RES_USERS : "belongs to user"
                </div>
            </div>
        </div>

        <!-- Tab 2: Model Browser -->
        <div id="models-tab" class="tab-content">
            <h2>Model Browser</h2>
            <input type="text" class="search-box" id="model-search" placeholder="Search models by name, field, or relationship..." onkeyup="filterModels()">

            <div class="model-grid" id="model-grid">
                <!-- Conversation System -->
                <div class="model-card" data-category="conversation">
                    <div class="model-header">AI Conversation</div>
                    <div class="model-tech-name">ai.conversation</div>
                    <div class="model-section">
                        <div class="model-section-title">Key Fields</div>
                        <div>name, user_id, context_model, context_id, conversation_type, status</div>
                    </div>
                    <div class="model-section">
                        <div class="model-section-title">Relationships</div>
                        <div class="relationship-item">
                            <span class="relationship-type">One2many:</span> ai_message_ids ‚Üí ai.message
                        </div>
                        <div class="relationship-item">
                            <span class="relationship-type">Many2one:</span> user_id ‚Üí res.users
                        </div>
                        <div class="relationship-item">
                            <span class="relationship-type">Many2many:</span> workspace_ids ‚Üí ai.workspace
                        </div>
                    </div>
                    <div class="used-by">
                        <strong>Used by:</strong> ai_sam, ai_sam_ui, ai_sam_memory
                    </div>
                </div>

                <div class="model-card" data-category="conversation">
                    <div class="model-header">AI Message</div>
                    <div class="model-tech-name">ai.message</div>
                    <div class="model-section">
                        <div class="model-section-title">Key Fields</div>
                        <div>role, content, token_count, ai_model, ai_provider</div>
                    </div>
                    <div class="model-section">
                        <div class="model-section-title">Relationships</div>
                        <div class="relationship-item">
                            <span class="relationship-type">Many2one:</span> conversation_id ‚Üí ai.conversation
                        </div>
                    </div>
                    <div class="used-by">
                        <strong>Used by:</strong> ai_sam, ai_sam_ui
                    </div>
                </div>

                <!-- Canvas System -->
                <div class="model-card" data-category="canvas">
                    <div class="model-header">Canvas</div>
                    <div class="model-tech-name">canvas</div>
                    <div class="model-section">
                        <div class="model-section-title">Key Fields</div>
                        <div>name, branch_type, canvas_type, json_definition, execution_mode</div>
                    </div>
                    <div class="model-section">
                        <div class="model-section-title">Relationships</div>
                        <div class="relationship-item">
                            <span class="relationship-type">One2many:</span> node_ids ‚Üí nodes
                        </div>
                        <div class="relationship-item">
                            <span class="relationship-type">One2many:</span> execution_ids ‚Üí executions
                        </div>
                        <div class="relationship-item">
                            <span class="relationship-type">Many2one:</span> workflow_type_id ‚Üí workflow_types
                        </div>
                    </div>
                    <div class="used-by">
                        <strong>Used by:</strong> ai_sam, ai_sam_workflows, ai_sam_creatives
                    </div>
                </div>

                <div class="model-card" data-category="canvas">
                    <div class="model-header">Nodes</div>
                    <div class="model-tech-name">nodes</div>
                    <div class="model-section">
                        <div class="model-section-title">Key Fields</div>
                        <div>node_id, name, node_type_id, parameters, x_cord, y_cord</div>
                    </div>
                    <div class="model-section">
                        <div class="model-section-title">Relationships</div>
                        <div class="relationship-item">
                            <span class="relationship-type">Many2one:</span> canvas_id ‚Üí canvas
                        </div>
                        <div class="relationship-item">
                            <span class="relationship-type">Many2one:</span> node_type_id ‚Üí node_types
                        </div>
                    </div>
                    <div class="used-by">
                        <strong>Used by:</strong> ai_sam, ai_sam_workflows
                    </div>
                </div>

                <div class="model-card" data-category="canvas">
                    <div class="model-header">Executions</div>
                    <div class="model-tech-name">executions</div>
                    <div class="model-section">
                        <div class="model-section-title">Key Fields</div>
                        <div>state, start_time, end_time, trigger_type, input_data, output_data</div>
                    </div>
                    <div class="model-section">
                        <div class="model-section-title">Relationships</div>
                        <div class="relationship-item">
                            <span class="relationship-type">Many2one:</span> canvas_id ‚Üí canvas
                        </div>
                        <div class="relationship-item">
                            <span class="relationship-type">Many2one:</span> triggered_by ‚Üí res.users
                        </div>
                    </div>
                    <div class="used-by">
                        <strong>Used by:</strong> ai_sam, ai_sam_workflows
                    </div>
                </div>

                <div class="model-card" data-category="canvas">
                    <div class="model-header">Connections</div>
                    <div class="model-tech-name">connections</div>
                    <div class="model-section">
                        <div class="model-section-title">Key Fields</div>
                        <div>from_node_id, to_node_id, connection_type</div>
                    </div>
                    <div class="model-section">
                        <div class="model-section-title">Relationships</div>
                        <div class="relationship-item">
                            <span class="relationship-type">Many2one:</span> canvas_id ‚Üí canvas
                        </div>
                        <div class="relationship-item">
                            <span class="relationship-type">Many2one:</span> from_node_id ‚Üí nodes
                        </div>
                        <div class="relationship-item">
                            <span class="relationship-type">Many2one:</span> to_node_id ‚Üí nodes
                        </div>
                    </div>
                    <div class="used-by">
                        <strong>Used by:</strong> ai_sam, ai_sam_workflows
                    </div>
                </div>

                <!-- Add more model cards as needed -->
                <div class="model-card" data-category="agent">
                    <div class="model-header">AI Agent Definition</div>
                    <div class="model-tech-name">ai.agent.definition</div>
                    <div class="model-section">
                        <div class="model-section-title">Key Fields</div>
                        <div>name, agent_type, system_prompt, capabilities, active</div>
                    </div>
                    <div class="model-section">
                        <div class="model-section-title">Relationships</div>
                        <div class="relationship-item">
                            <span class="relationship-type">One2many:</span> execution_ids ‚Üí ai.agent.execution
                        </div>
                        <div class="relationship-item">
                            <span class="relationship-type">One2many:</span> knowledge_ids ‚Üí ai.agent.knowledge
                        </div>
                    </div>
                    <div class="used-by">
                        <strong>Used by:</strong> ai_sam_intelligence
                    </div>
                </div>

                <div class="model-card" data-category="memory">
                    <div class="model-header">AI Graph Service</div>
                    <div class="model-tech-name">ai.graph.service</div>
                    <div class="model-section">
                        <div class="model-section-title">Key Fields</div>
                        <div>service_type, connection_string, active</div>
                    </div>
                    <div class="model-section">
                        <div class="model-section-title">Relationships</div>
                        <div class="relationship-item">
                            <span class="relationship-type">Indexes:</span> ai.conversation (graph nodes)
                        </div>
                    </div>
                    <div class="used-by">
                        <strong>Used by:</strong> ai_sam_memory
                    </div>
                </div>

                <div class="model-card" data-category="sam">
                    <div class="model-header">SAM Personality</div>
                    <div class="model-tech-name">sam.personality</div>
                    <div class="model-section">
                        <div class="model-section-title">Key Fields</div>
                        <div>name, personality_traits, communication_style</div>
                    </div>
                    <div class="model-section">
                        <div class="model-section-title">Relationships</div>
                        <div class="relationship-item">
                            <span class="relationship-type">One2many:</span> user_profile_ids ‚Üí sam.user.profile
                        </div>
                    </div>
                    <div class="used-by">
                        <strong>Used by:</strong> ai_sam
                    </div>
                </div>
            </div>
        </div>

        <!-- Tab 3: Capability Matrix -->
        <div id="capabilities-tab" class="tab-content">
            <h2>Capability Matrix</h2>
            <p style="margin-bottom: 20px; color: #7f8c8d;">What features exist where? Quick reference for architects and developers.</p>

            <div class="model-grid">
                <div class="model-card">
                    <div class="model-header">Conversation Management</div>
                    <div class="model-section">
                        <div class="model-section-title">Models</div>
                        <div>ai.conversation, ai.message, ai.token.usage</div>
                    </div>
                    <div class="model-section">
                        <div class="model-section-title">Modules</div>
                        <div>ai_brain (data), ai_sam (logic), ai_sam_ui (interface)</div>
                    </div>
                    <div class="model-section">
                        <div class="model-section-title">Extension Points</div>
                        <div class="relationship-item">Add context_model/context_id to link conversations to any Odoo model</div>
                        <div class="relationship-item">Extend ai.message with attachments</div>
                    </div>
                </div>

                <div class="model-card">
                    <div class="model-header">Workflow Automation</div>
                    <div class="model-section">
                        <div class="model-section-title">Models</div>
                        <div>canvas, nodes, connections, executions</div>
                    </div>
                    <div class="model-section">
                        <div class="model-section-title">Modules</div>
                        <div>ai_brain (data), ai_sam (core), ai_sam_workflows (UI)</div>
                    </div>
                    <div class="model-section">
                        <div class="model-section-title">Extension Points</div>
                        <div class="relationship-item">Add node_types for new node types</div>
                        <div class="relationship-item">Extend canvas.platform for new canvas types</div>
                    </div>
                </div>

                <div class="model-card">
                    <div class="model-header">Graph Memory</div>
                    <div class="model-section">
                        <div class="model-section-title">Models</div>
                        <div>ai.graph.service, ai.vector.service, ai.conversation.import</div>
                    </div>
                    <div class="model-section">
                        <div class="model-section-title">Modules</div>
                        <div>ai_brain (data), ai_sam_memory (UI + Apache AGE)</div>
                    </div>
                    <div class="model-section">
                        <div class="model-section-title">Extension Points</div>
                        <div class="relationship-item">Add graph node types</div>
                        <div class="relationship-item">Extend vector embedding models</div>
                    </div>
                </div>

                <div class="model-card">
                    <div class="model-header">Agent Registry</div>
                    <div class="model-section">
                        <div class="model-section-title">Models</div>
                        <div>ai.agent.definition, ai.agent.execution, ai.agent.knowledge</div>
                    </div>
                    <div class="model-section">
                        <div class="model-section-title">Modules</div>
                        <div>ai_brain (data), ai_sam_intelligence (registry)</div>
                    </div>
                    <div class="model-section">
                        <div class="model-section-title">Extension Points</div>
                        <div class="relationship-item">Register new agent types</div>
                        <div class="relationship-item">Add agent knowledge sources</div>
                    </div>
                </div>

                <div class="model-card">
                    <div class="model-header">Member Management</div>
                    <div class="model-section">
                        <div class="model-section-title">Models</div>
                        <div>sam.member, res.partner (extended)</div>
                    </div>
                    <div class="model-section">
                        <div class="model-section-title">Modules</div>
                        <div>ai_brain (data), ai_sam_members (management)</div>
                    </div>
                    <div class="model-section">
                        <div class="model-section-title">Extension Points</div>
                        <div class="relationship-item">Extend sam.member with custom fields</div>
                        <div class="relationship-item">Add membership tiers</div>
                    </div>
                </div>

                <div class="model-card">
                    <div class="model-header">Content Generation</div>
                    <div class="model-section">
                        <div class="model-section-title">Models</div>
                        <div>canvas (multimedia), ai.conversation (chat)</div>
                    </div>
                    <div class="model-section">
                        <div class="model-section-title">Modules</div>
                        <div>ai_brain (data), ai_sam_creatives (UI)</div>
                    </div>
                    <div class="model-section">
                        <div class="model-section-title">Extension Points</div>
                        <div class="relationship-item">Add creative templates</div>
                        <div class="relationship-item">Extend canvas with new media types</div>
                    </div>
                </div>
            </div>
        </div>

        <footer>
            <p><strong>SAM AI Database Schema</strong> - Generated from ai_brain models</p>
            <p>Path: C:\Working With AI\ai_sam\ai_sam\ai_brain\models</p>
            <p>This file is automatically maintained by /docs or /schema agents</p>
        </footer>
    </div>

    <script>
        // Initialize Mermaid
        mermaid.initialize({
            startOnLoad: true,
            theme: 'default',
            er: {
                fontSize: 14
            }
        });

        // Tab switching
        function showTab(tabName) {
            // Hide all tabs
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelectorAll('.nav-tab').forEach(tab => {
                tab.classList.remove('active');
            });

            // Show selected tab
            document.getElementById(tabName + '-tab').classList.add('active');
            event.target.classList.add('active');
        }

        // Model search filter
        function filterModels() {
            const searchTerm = document.getElementById('model-search').value.toLowerCase();
            const modelCards = document.querySelectorAll('.model-card');

            modelCards.forEach(card => {
                const text = card.textContent.toLowerCase();
                if (text.includes(searchTerm)) {
                    card.style.display = 'block';
                } else {
                    card.style.display = 'none';
                }
            });
        }
    </script>
</body>
</html>
